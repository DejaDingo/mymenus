<div id="mainmenu">
    <{foreach item=menu from=$block}>
        <{if $menu.level == 0}>
                <{assign var=myStr value="["|cat:$xoops_langcode|cat:"]"}>
                <{if ($xlanguage && (($menu.title|strstr:$myStr) OR ($menu.image|strstr:$myStr)) OR !$xlanguage)}>
                    <a class="menuMain <{$menu.css}> <{if $menu.topselected}>maincurrent<{/if}>" href="<{$menu.link}>" target="<{$menu.target}>" title="<{$menu.alt_title}>">
                    <{if $menu.image}><img src="<{$menu.image}>"/><{/if}>
                    <{$menu.title}>
                </a>
                <{if $menu.selected}>
                        <{foreach item=sub from=$block}>
                                <{if $menu.id == $sub.pid}>
                                <{if ($xlanguage && (($menu.title|strstr:$myStr) OR ($menu.image|strstr:$myStr)) OR !$xlanguage)}>
                                    <a class="menuSub <{$sub.css}> <{if $sub.selected}>maincurrent<{/if}>" href="<{$sub.link}>" target="<{$sub.target}>" title="<{$sub.alt_title}>">
                                    <{if $sub.image}><img src="<{$sub.image}>"/><{/if}>
                                    <{$sub.title}>
                                </a>
                            <{/if}>
                        <{/if}>
                    <{/foreach}>
                <{/if}>
            <{/if}>
        <{/if}>
    <{/foreach}>
</div>
